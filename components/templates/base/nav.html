<style>
    .dropdown-content {
      display: none;
      position: absolute;
      min-width: 160px;
      z-index: 1;
    }
    
    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }
    
    .dropdown-content a:hover {background-color: #f1f1f1;}
    
    .show {display: block;}
    </style>

{% load static %}
<nav class="navbar navbar-expand-lg navbar-light bg-light d-none d-lg-block">
    <ul class="navbar-nav">
            <li><img src="{% static 'images/case-open.png' %}" alt="Case Open"></li>
        {% if user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'find-song' %}">Find Song</a></li>
            {% if request.path == '/library/' %}
                <li class="nav-item"><a class="nav-link" href="{% url 'catalogue' %}">Catalogue</a></li>
            {% else %}
                <li class="nav-item"><a class="nav-link" href="{% url 'library' %}">Library</a></li>
            {% endif %}
            <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
        {% else %}
            <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'catalogue' %}">Catalogue</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Register</a></li>
        {% endif %} 
    </ul>
</nav>


<nav class="navbar navbar-expand-lg navbar-light bg-light d-lg-none">
    <ul class="navbar-nav">
        <li><img src="{% static 'images/case-open.png' %}" alt="Case Open"></li>
        <li class="nav-item dropdown">
            <button class="nav-link dropdown-toggle" id="dropDownButton">
                More
            </button>
            <ul class="dropdown-menu custom-dropdown" id="dropDownMenu">
                {% if user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                {% endif %}
                {% if user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'find-song' %}">Find Song</a></li>
                    {% if request.path == '/library/' %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'catalogue' %}">Catalogue</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'library' %}">Library</a></li>
                    {% endif %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'catalogue' %}">Catalogue</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Register</a></li>
                {% endif %} 
            </ul>
        </li>
    </ul>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
            document.getElementById("dropDownButton").onclick = function() {
                document.getElementById("dropDownMenu").classList.toggle("show");
            }

            window.onclick = function(event) {
                if (!event.target.matches('.nav-link')) {
                    var dropdowns = document.getElementsByClassName("dropDownMenu");
                    for (var i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            }
    });
</script>